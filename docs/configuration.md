# Configuration & Rules

## 1. The Sentinel Rules (`.saguaro.rules`)

The Sentinel engine enforces compliance using a YAML-based rule file located at the project root (`.saguaro.rules`).

### Rule Format

```yaml
rules:
  - id: <unique-id>
    pattern: '<regex-pattern>'
    message: "<Failure Message>"
    severity: <ERROR|WARN|INFO>
    scope: "<glob-pattern>"
```

### Best Practices
1.  **Use Single Quotes**: Always use single quotes `'...'` for regex patterns to avoid YAML escaping hell.
2.  **Scopes**: Use `**` for recursive matching.
3.  **Severity**:
    *   `ERROR`: Blocks CI/CD and verification.
    *   `WARN`: Displays warning but returns exit code 0.
    *   `INFO`: Informational only.

### Example File

```yaml
rules:
  - id: no-token-leak
    pattern: '(sk-[a-zA-Z0-9]{20,})'
    message: "Potential API Key Leak"
    severity: ERROR
    scope: "**"

  - id: python-snake-case
    pattern: 'def [A-Z]'
    message: "Use snake_case for Python functions"
    severity: WARN
    scope: "**/*.py"
```

## 2. System Configuration (`.saguaro/config.yaml`)

Generated by `saguaro init`. Controls the indexing engine.

```yaml
version: 1
indexing:
  # Automatically calculate dimensions based on repo size
  auto_scale: true
  
  # Manual override (if auto_scale: false)
  hd_dim: 8192
  
  # Buffer for growth (40% default)
  dark_space_buffer: 0.4
  
  # File exclusions (in addition to .gitignore)
  exclude:
    - node_modules
    - venv
    - target

legislator:
  # Enable auto-drafting of rules
  auto_draft: true
  confidence_threshold: 0.90
```
